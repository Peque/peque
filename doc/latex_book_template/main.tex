
\documentclass[a4paper,10pt,onecolumn]{book}

% Packages needed
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{lmodern}         % Latin Modern fonts
\usepackage[english]{babel}
\usepackage{graphicx}
\usepackage{geometry}
\usepackage[]{tocbibind}     % Adding LoF, LoT and ToC itself to ToC
\usepackage{lipsum}          % Write "Lorem ipsum..." placeholder text
\usepackage{mathtools}
\usepackage{amssymb}
\usepackage{xcolor}
\usepackage{textcomp}        % Allow the use of upquote = true in \lstset
\usepackage{wrapfig}         % Wrap text around graphics (i.e. tip environment)
\usepackage{bookmark}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{etoolbox}
\usepackage{pgfgantt}
\usepackage{booktabs}
\usepackage{siunitx}
\usepackage{enumitem}
\usepackage{emptypage}

\pdfminorversion=4      % Avoid some problems with bad PDF readers
\usepackage{parskip}
\geometry{margin=2.5cm}

% Headers and footers
\usepackage{fancyhdr}
\fancyhf{}
\fancyhead[LE]{\textit{\leftmark}}
\fancyhead[RO]{\textit{\rightmark}}
\fancyfoot[LE,RO]{\thepage}
\renewcommand{\headrulewidth}{0.5pt}
\renewcommand{\footrulewidth}{0.5pt}
% <<<<< Tweaks for the University

\usepackage{tabularx}
\newcolumntype{L}{>{\raggedright\arraybackslash}X}
\newcolumntype{C}{>{\centering\arraybackslash}X}
\newcolumntype{R}{>{\raggedleft\arraybackslash}X}

\usepackage{tikz}
\usetikzlibrary{arrows,shapes,positioning,shadows,trees}
\tikzset{
  basic/.style  = {draw, text width=2cm, drop shadow, font=\sffamily, rectangle},
  root/.style   = {basic, rounded corners=2pt, thin, align=center, fill=white},
  level 2/.style = {basic, rounded corners=6pt, thin,align=center, fill=gray!30, text width=8em},
  level 3/.style = {basic, thin, align=left, fill=white, text width=7em}
}

% Captions
\usepackage{caption}
\captionsetup
{
  margin = 30pt,
  skip = 10pt,
  justification = centering,
  labelfont = bf,
  textfont = it,
  font = small
}

% Custom colors
\definecolor{lightgray}{gray}{0.95}
\definecolor{orange}{rgb}{1,0.5,0}

% Code listings
\usepackage{listings}
\lstset
{
  basicstyle = \small\ttfamily,
  escapeinside = {<@}{@>},
  numbers = left,
  upquote = true,
%  frame = shadowbox,
%  frame = tRBl,
%  rulesepcolor = \color{lightgray},
  frame = single,
  columns = fullflexible,
  showstringspaces = false,
  tabsize = 8,
  keepspaces = true,
  rulecolor = \color{gray},
  commentstyle=\color{gray}\itshape,
  keywordstyle=\color{blue}\bfseries,
  backgroundcolor=\color{lightgray},
  stringstyle=\color{orange},
  numberstyle = \tiny,
  breaklines = true,
  postbreak = \raisebox{0ex}[0ex][0ex]{\ensuremath{\color{gray}\hookrightarrow\space}},
  caption = \lstname,
  literate = {á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1
}

\usepackage{hyperref}
\hypersetup
{
  colorlinks = false,      % No link color
  linkbordercolor = gray,  % Gray link border
  urlbordercolor = gray,   % Gray URL border
  pdfborderstyle = {/S/U/W 0.5},
}

% Glossaries
\usepackage[acronym,toc]{glossaries}
\makeglossaries
\loadglsentries[main]{content/glossary.tex}

% No numbering in parts (redefining \part setting "empty" page style)
\makeatletter
\patchcmd{\part}{\thispagestyle{plain}}{\thispagestyle{empty}}
\makeatother

% Euro symbol
\usepackage[gen]{eurosym}
\DeclareUnicodeCharacter{20AC}{\euro{}}

% Graphics path configuration
\graphicspath
{
  {./images/}
  {../src/R/images/}
  {../src/python/images/}
  {../src/octave/images/}
}

\newenvironment{tip}
{
  \vspace{+10pt}
  \begin{it}
  \noindent
  \begin{minipage}{\linewidth}
  \rightskip=1cm
  \leftskip=1cm
  \setlength\intextsep{0pt}
  \begin{wrapfigure}[1]{l}[2cm]{0cm}
    \hspace{-1.5cm}
    \includegraphics[width=1.5cm]{tip}
  \end{wrapfigure}
}
{
  {}
  \end{minipage}
  \end{it}
  \vspace{+10pt}
}

\newcommand{\cquote}[2]
{
  \begin{flushright}
    \begin{minipage}{0.6\linewidth}
      \raggedleft
      \small
      {
        ``\textit{#1}'' \\
        \vspace{5pt}
        \textit{\textbf{--- #2}}
      }
    \end{minipage}
  \end{flushright}
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% DOCUMENT
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

% Set empty style (no numbering)
\pagestyle{empty}

% Title page
\input{content/title.tex}
\cleardoublepage

% Dedicated to
\pagenumbering{gobble}
\chapter*{}
\input{content/dedicatedto.tex}
\cleardoublepage

% Set plain style and roman page numbering
\pagestyle{plain}
\pagenumbering{roman}

% Executive Summary
\chapter*{Executive Summary}
\input{content/executive-summary.tex}

% Acknowledgements
\chapter*{Acknowledgements}
\input{content/acknowledgements.tex}

% Table of contents, list of figures and list of tables
\tableofcontents
\listoffigures
\listoftables
\lstlistoflistings
\cleardoublepage

% Set headings style and arabic page numbering
\pagestyle{headings}
\pagestyle{fancy}
\pagenumbering{arabic}

\part{Styles}

\chapter{Basic styles}
\label{chapter:basic-styles}
\input{content/basic-styles.tex}

\chapter{More styles}
\label{chapter:more-styles}
\input{content/more-styles.tex}

\part{Foo}

\chapter{Lipsum}
\label{chapter:lipsum}
\input{content/lipsum.tex}

\bookmarksetup{startatroot}    % Avoid nesting appendix in \part
\addtocontents{toc}{\bigskip}  % Create bigger sepparator before the appendix in the TOC
\appendix

\setglossarystyle{list}
\printglossary[type=\acronymtype,title=Abbreviations]
\printglossary[title=Nomenclature]

\bibliography{content/bibliography}
\bibliographystyle{plain}

\chapter{Notes}
\label{chapter:notes}
\input{content/notes.tex}

\end{document}

